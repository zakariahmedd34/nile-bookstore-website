{% extends 'base.html' %}
{% block content %}
<div class="container">

        <div class="page-header">
            <h1>Home Page</h1>
            <p>Explore textbooks, references, and general reading for Nile University students.</p>
        </div>

       <form class="d-flex" method="GET" action="{{ url_for('search') }}">
            <input
                class="form-control me-2"
                type="search"
                name="q"
                placeholder="Search books..."
                aria-label="Search"
                required
            >
            <button class="btn btn-outline-primary" type="submit">
                Search
            </button>
            </form>
            
<div class="container">
    <div class="section">
        <h2>Featured Books</h2>
        {% if cat_list %}
            {% for cat in categories %}
                {% set cat_books = cat_list[cat.id] %}

                {% if cat_books %}
                    <h3>{{ cat.name }}</h3>

                    <div class="book-grid">
                        {% for book in cat_books %}
                            <div class="book-card">

                                {% if book.cover_url %}
                                    <img src="{{ book.cover_url }}" alt="{{ book.title }}" class="book-cover-img">
                                {% else %}
                                    <div class="book-cover-placeholder">{{ book.title[:6] }}</div>
                                {% endif %}

                                <h3>{{ book.title }}</h3>
                                <p class="book-author">By {{ book.author }}</p>
                                <p class="book-price">EGP {{ book.price }}</p>

                                {% if book.description %}
                                    <p class="book-description">{{ book.description[:80] }}...</p>
                                {% endif %}
                                <button class="btn-primary"onclick="window.location.href='{{url_for('book_details',book_id = book.id,slug = book.title|lower|replace(' ', '-') )}}'">View Book</button>

                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endfor %}
        {% endif %}
    </div>
</div>

{% endblock %}
